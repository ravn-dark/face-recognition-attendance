<?xml version="1.0" encoding="UTF-8"?>
<svg width="1400" height="1200" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1400" height="1200" fill="#ffffff"/>
  
  <!-- Title -->
  <text x="700" y="40" font-family="Arial, sans-serif" font-size="22" font-weight="bold" text-anchor="middle" fill="#212529">
    Figure 3.2: Workflow of the Proposed Attendance System
  </text>
  
  <!-- Start -->
  <rect x="600" y="80" width="200" height="60" rx="30" fill="#e7f1ff" stroke="#0d6efd" stroke-width="2"/>
  <text x="700" y="115" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#212529">START</text>
  
  <!-- Decision: Registration or Attendance -->
  <polygon points="650,180 750,220 650,260 550,220" fill="#fff3cd" stroke="#ffc107" stroke-width="2"/>
  <text x="700" y="215" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#212529">User Action?</text>
  
  <!-- Registration Branch -->
  <rect x="100" y="300" width="180" height="50" rx="5" fill="#d4edda" stroke="#28a745" stroke-width="2"/>
  <text x="190" y="325" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#212529">Student Registration</text>
  <text x="190" y="342" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#212529">Upload Photo</text>
  
  <rect x="100" y="380" width="180" height="50" rx="5" fill="#e7f1ff" stroke="#0d6efd" stroke-width="2"/>
  <text x="190" y="405" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#212529">Face Detection</text>
  <text x="190" y="422" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#212529">(OpenCV)</text>
  
  <!-- Decision: Face Detected? -->
  <polygon points="150,460 190,500 150,540 110,500" fill="#fff3cd" stroke="#ffc107" stroke-width="2"/>
  <text x="190" y="495" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="#212529">Face</text>
  <text x="190" y="510" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="#212529">Detected?</text>
  
  <rect x="100" y="570" width="180" height="50" rx="5" fill="#e7f1ff" stroke="#0d6efd" stroke-width="2"/>
  <text x="190" y="595" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#212529">Extract Face Encoding</text>
  <text x="190" y="612" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#212529">(128 dimensions)</text>
  
  <rect x="100" y="650" width="180" height="50" rx="5" fill="#d4edda" stroke="#28a745" stroke-width="2"/>
  <text x="190" y="675" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#212529">Store in Database</text>
  <text x="190" y="692" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#212529">(Student + Encoding)</text>
  
  <!-- Attendance Branch -->
  <rect x="1120" y="300" width="180" height="50" rx="5" fill="#d4edda" stroke="#28a745" stroke-width="2"/>
  <text x="1210" y="325" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#212529">Take Attendance</text>
  <text x="1210" y="342" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#212529">Open Camera</text>
  
  <rect x="1120" y="380" width="180" height="50" rx="5" fill="#e7f1ff" stroke="#0d6efd" stroke-width="2"/>
  <text x="1210" y="405" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#212529">Capture Live Frame</text>
  <text x="1210" y="422" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#212529">(Real-time)</text>
  
  <rect x="1120" y="460" width="180" height="50" rx="5" fill="#e7f1ff" stroke="#0d6efd" stroke-width="2"/>
  <text x="1210" y="485" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#212529">Detect Faces</text>
  <text x="1210" y="502" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#212529">(OpenCV)</text>
  
  <!-- Decision: Face Detected? -->
  <polygon points="1170,540 1210,580 1170,620 1130,580" fill="#fff3cd" stroke="#ffc107" stroke-width="2"/>
  <text x="1210" y="575" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="#212529">Face</text>
  <text x="1210" y="590" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="#212529">Detected?</text>
  
  <rect x="1120" y="650" width="180" height="50" rx="5" fill="#e7f1ff" stroke="#0d6efd" stroke-width="2"/>
  <text x="1210" y="675" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#212529">Extract Encoding</text>
  <text x="1210" y="692" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#212529">(128 dimensions)</text>
  
  <rect x="1120" y="730" width="180" height="50" rx="5" fill="#e7f1ff" stroke="#0d6efd" stroke-width="2"/>
  <text x="1210" y="755" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#212529">Compare with</text>
  <text x="1210" y="772" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#212529">Database</text>
  
  <!-- Decision: Match Found? -->
  <polygon points="1170,810 1210,850 1170,890 1130,850" fill="#fff3cd" stroke="#ffc107" stroke-width="2"/>
  <text x="1210" y="845" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="#212529">Match</text>
  <text x="1210" y="860" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="#212529">Found?</text>
  
  <!-- Decision: Already Marked? -->
  <polygon points="1170,920 1210,960 1170,1000 1130,960" fill="#fff3cd" stroke="#ffc107" stroke-width="2"/>
  <text x="1210" y="955" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="#212529">Already</text>
  <text x="1210" y="970" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="#212529">Marked?</text>
  
  <rect x="1120" y="1020" width="180" height="50" rx="5" fill="#d4edda" stroke="#28a745" stroke-width="2"/>
  <text x="1210" y="1045" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#212529">Mark Attendance</text>
  <text x="1210" y="1062" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#212529">(Store in DB)</text>
  
  <!-- View Records Branch -->
  <rect x="600" y="300" width="200" height="50" rx="5" fill="#d4edda" stroke="#28a745" stroke-width="2"/>
  <text x="700" y="325" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#212529">View Attendance Records</text>
  
  <rect x="600" y="380" width="200" height="50" rx="5" fill="#d4edda" stroke="#28a745" stroke-width="2"/>
  <text x="700" y="405" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#212529">Query Database</text>
  
  <rect x="600" y="460" width="200" height="50" rx="5" fill="#f8d7da" stroke="#dc3545" stroke-width="2"/>
  <text x="700" y="485" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#212529">Display Results</text>
  <text x="700" y="502" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#212529">(Table &amp; Dashboard)</text>
  
  <!-- Merge Point -->
  <rect x="600" y="1100" width="200" height="60" rx="30" fill="#e7f1ff" stroke="#0d6efd" stroke-width="2"/>
  <text x="700" y="1135" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#212529">END</text>
  
  <!-- Arrows -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#0d6efd"/>
    </marker>
    <marker id="arrowhead-yellow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#ffc107"/>
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#dc3545"/>
    </marker>
  </defs>
  
  <!-- Start to Decision -->
  <line x1="700" y1="140" x2="700" y2="180" stroke="#0d6efd" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  
  <!-- Decision to branches -->
  <line x1="650" y1="220" x2="190" y2="300" stroke="#0d6efd" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="420" y="260" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#0d6efd">Register</text>
  
  <line x1="750" y1="220" x2="1210" y2="300" stroke="#0d6efd" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="980" y="260" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#0d6efd">Take Attendance</text>
  
  <line x1="700" y1="220" x2="700" y2="300" stroke="#0d6efd" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="720" y="260" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#0d6efd">View Records</text>
  
  <!-- Registration Flow -->
  <line x1="190" y1="350" x2="190" y2="380" stroke="#0d6efd" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <line x1="190" y1="430" x2="190" y2="460" stroke="#0d6efd" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  
  <!-- Face Detected Decision - Yes -->
  <line x1="150" y1="500" x2="150" y2="570" stroke="#28a745" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="80" y="535" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#28a745">Yes</text>
  
  <!-- Face Detected Decision - No -->
  <line x1="150" y1="500" x2="50" y2="500" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead-red)"/>
  <line x1="50" y1="500" x2="50" y2="1100" stroke="#dc3545" stroke-width="2"/>
  <line x1="50" y1="1100" x2="600" y2="1100" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead-red)"/>
  <text x="30" y="495" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#dc3545">No</text>
  
  <line x1="190" y1="700" x2="190" y2="650" stroke="#28a745" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <line x1="190" y1="700" x2="190" y2="1100" stroke="#28a745" stroke-width="2.5"/>
  <line x1="190" y1="1100" x2="600" y2="1100" stroke="#28a745" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  
  <!-- Attendance Flow -->
  <line x1="1210" y1="350" x2="1210" y2="380" stroke="#0d6efd" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <line x1="1210" y1="430" x2="1210" y2="460" stroke="#0d6efd" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  
  <!-- Face Detected Decision - Yes -->
  <line x1="1170" y1="580" x2="1170" y2="650" stroke="#28a745" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="1090" y="615" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#28a745">Yes</text>
  
  <!-- Face Detected Decision - No -->
  <line x1="1170" y1="580" x2="1350" y2="580" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead-red)"/>
  <line x1="1350" y1="580" x2="1350" y2="1100" stroke="#dc3545" stroke-width="2"/>
  <line x1="1350" y1="1100" x2="800" y2="1100" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead-red)"/>
  <text x="1370" y="575" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#dc3545">No</text>
  
  <line x1="1210" y1="780" x2="1210" y2="730" stroke="#0d6efd" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <line x1="1210" y1="780" x2="1210" y2="810" stroke="#0d6efd" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  
  <!-- Match Found Decision - Yes -->
  <line x1="1170" y1="850" x2="1170" y2="920" stroke="#28a745" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="1090" y="885" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#28a745">Yes</text>
  
  <!-- Match Found Decision - No -->
  <line x1="1170" y1="850" x2="1350" y2="850" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead-red)"/>
  <line x1="1350" y1="850" x2="1350" y2="1100" stroke="#dc3545" stroke-width="2"/>
  <line x1="1350" y1="1100" x2="800" y2="1100" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead-red)"/>
  <text x="1370" y="845" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#dc3545">No</text>
  
  <!-- Already Marked Decision - No -->
  <line x1="1170" y1="960" x2="1170" y2="1020" stroke="#28a745" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="1090" y="990" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#28a745">No</text>
  
  <!-- Already Marked Decision - Yes -->
  <line x1="1170" y1="960" x2="1350" y2="960" stroke="#ffc107" stroke-width="2" marker-end="url(#arrowhead-yellow)"/>
  <line x1="1350" y1="960" x2="1350" y2="1100" stroke="#ffc107" stroke-width="2"/>
  <line x1="1350" y1="1100" x2="800" y2="1100" stroke="#ffc107" stroke-width="2" marker-end="url(#arrowhead-yellow)"/>
  <text x="1370" y="955" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#ffc107">Yes</text>
  
  <line x1="1210" y1="1070" x2="1210" y2="1100" stroke="#28a745" stroke-width="2.5"/>
  <line x1="1210" y1="1100" x2="800" y2="1100" stroke="#28a745" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  
  <!-- View Records Flow -->
  <line x1="700" y1="350" x2="700" y2="380" stroke="#0d6efd" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <line x1="700" y1="430" x2="700" y2="460" stroke="#0d6efd" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <line x1="700" y1="510" x2="700" y2="1100" stroke="#dc3545" stroke-width="2.5" marker-end="url(#arrowhead-red)"/>
  
  <!-- Loop back for continuous attendance -->
  <line x1="1210" y1="1070" x2="1350" y2="1070" stroke="#0d6efd" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="1350" y1="1070" x2="1350" y2="380" stroke="#0d6efd" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="1350" y1="380" x2="1290" y2="380" stroke="#0d6efd" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  <text x="1320" y="370" font-family="Arial, sans-serif" font-size="9" font-style="italic" fill="#0d6efd">Continue</text>
  
  <!-- Legend -->
  <rect x="50" y="50" width="180" height="140" rx="5" fill="#ffffff" stroke="#dee2e6" stroke-width="1"/>
  <text x="140" y="70" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#212529">Legend</text>
  <line x1="70" y1="85" x2="90" y2="85" stroke="#0d6efd" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="95" y="90" font-family="Arial, sans-serif" font-size="10" fill="#212529">Process Flow</text>
  <line x1="70" y1="105" x2="90" y2="105" stroke="#28a745" stroke-width="2.5" marker-end="url(#arrowhead)"/>
  <text x="95" y="110" font-family="Arial, sans-serif" font-size="10" fill="#212529">Success Path</text>
  <line x1="70" y1="125" x2="90" y2="125" stroke="#dc3545" stroke-width="2" marker-end="url(#arrowhead-red)"/>
  <text x="95" y="130" font-family="Arial, sans-serif" font-size="10" fill="#212529">Error/No Path</text>
  <line x1="70" y1="145" x2="90" y2="145" stroke="#0d6efd" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  <text x="95" y="150" font-family="Arial, sans-serif" font-size="10" fill="#212529">Loop Back</text>
  <polygon points="70,165 90,175 70,185 50,175" fill="#fff3cd" stroke="#ffc107" stroke-width="1"/>
  <text x="95" y="175" font-family="Arial, sans-serif" font-size="10" fill="#212529">Decision Point</text>
</svg>
